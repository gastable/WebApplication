@model IEnumerable<AMWP.Models.Managements>

@{
    ViewBag.Title = "會員管理";
}
<hr />
<h3 class="alert alert-info text-center">會員帳號管理</h3>

<p class="text-right">
    @Html.ActionLink("新增處理紀錄", "Create", null, new { @class = "btn btn-primary",id="btnCreate" })
</p>
<table class="table table-striped table-hover text-center">
    <thead class="thead-dark">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Members.Account)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Action)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CreatedDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.AdminID)
            </th>

            <th>資料管理</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Members.Account)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Action)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreatedDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Admins.Name)
                </td>

                <td>
                    @Html.ActionLink("修改", "Edit", new { id = item.SSN }, new { @class = "btn btn-warning" })
                    @*@Html.ActionLink("詳細內容", "Details", new { id = item.SSN }, new { @class = "btn btn-info", onclick = "" })*@

                    <button type="button" id="@item.SSN" class="btn btn-info" data-toggle="modal" data-target="#showDetailModal" onclick="getSSN(event)">
                        詳細內容
                    </button>
                    @*@Html.ActionLink("刪除", "Delete", new { id = item.SSN }, new { @class = "btn btn-danger" })*@
                </td>
            </tr>
        }
    </tbody>
</table>

<!-- Modal -->  
<div class="modal fade" id="showDetailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header alert alert-info">
                <h4 class="modal-title">詳細內容</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">關閉</button>
            </div>
        </div>
    </div>
</div>

@section CSS{
    <style>
        .alert-info {
            color: #0c5460;
            background-color: #acf2d4;
            border-color: #bee5eb;
        }
        #btnCreate {
            position: fixed;
            top: 95px;
            right: 450px;
        }
    </style>
}

@section scripts{
    <script>
        function getSSN(evt) {
            id=evt.target.id;
            $('#showDetailModal .modal-body').load("/Managements/Details/" + id);
        }
    </script>
}