@model IEnumerable<AMWP.Models.Admins>

@{
    ViewBag.Title = "管理員";
}
<hr />
<h3 class="alert alert-info text-center">管理員資料</h3>

<div class="row">
    <h4 class="col-md-8 text-right text-danger">@TempData["ForeignKey"]</h4>
    <div class="col-md-4 text-right mb-3">
        @Html.ActionLink("新增管理員", "Create", null, new { @class = "btn btn-primary",id="btnCreate" })
    </div>
</div>
<table class="table table-striped table-hover text-center">
    <thead class="thead-dark">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.AdminID)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Account)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>資料管理</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.AdminID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Account)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @*@Html.ActionLink("修改", "Edit", new { id = item.AdminID }, new { @class = "btn btn-warning" })*@
                    <button type="button" id="@item.AdminID" class="btn btn-warning" data-toggle="modal" data-target="#showEditModal" onclick="getAdminID(event)">
                        修改
                    </button>
                    @Html.ActionLink("刪除", "Delete", new { id = item.AdminID }, new { @class = "btn btn-danger",onclick="return confirm('您確定要刪除「"+item.Name+"」的管理員帳號嗎？')" })
                </td>
            </tr>
        }
    </tbody>
</table>
<div class="modal fade" id="showEditModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header alert alert-info">
                <h4 class="modal-title" >修改管理員資料</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                
            </div>
        </div>
    </div>
</div>

@section CSS{
    <style>
        .alert-info {
            color: #0c5460;
            background-color: #c9f8ed;
            border-color: #bee5eb;
        }

        #btnCreate {
            position: fixed;
            top: 95px;
            right: 450px;
        }
    </style>
}
@section scripts{
    <script>
        $('#navbar .nav-item').removeClass('active');
        $('#navItem1').addClass('active');
        function getAdminID(evt) {
            id=evt.target.id;
            $('#showEditModal .modal-body').load("/Admins/_Edit/" + id);
        }       
    </script>
}