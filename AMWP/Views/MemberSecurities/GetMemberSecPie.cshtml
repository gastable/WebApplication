@using System.Data;
@model System.Data.DataTable



@section scripts{
    <script>
        jQuery.extend({
            getChart: function (url) {
                var result = null;
                $ajax({
                    url: url,
                    type: 'get',
                    contentType: "application/json; charset=utf-8",
                    dataType: 'json',
                    async: false,
                    success: function (data) {
                        result = data;                        
                    }
                });
                return result;
            }
        });
        console.log(result['labels'])
        var pie = getChart('http://localhost:51223/MemberSecurities/GetMemberSecPie/22');
        
        //console.log(pie);
        //const data = {
        //    labels: pie['labels'],
        //    datasets: [{
        //        label: ['現值'],
        //        data: pie['data'],
        //        backgroundColor: ["#b2e061", "#bd7ebe", "#ffb55a", "#ffee65", "#beb9db", "#fdcce5", "#8bd3c7", "#fd7f6f", "#7eb0d5"],
        //    }]
        //};
        //var legendON = pie['labels'].length < 5 ? true : false;

        //const config = {
        //    type: "pie",
        //    data,
        //    options: {
        //        maintainAspectRatio: true,
        //        plugins: {
        //            datalabels: {
        //                align: 'center',
        //                formatter: (value, context) => {
        //                    const datapoints = context.chart.config.data.datasets[0].data;
        //                    //console.log(datapoints);
        //                    const totalvalue = datapoints.reduce((total, datapoint) => total + datapoint,
        //                        0);
        //                    const percentageValue = (value / totalvalue * 100).toFixed(2);
        //                    const display = [`${percentageValue}%`]
        //                    return display;
        //                }
        //            },
        //            legend: {
        //                display: legendON,
        //                onHover: (event, chartElement) => {
        //                    event.native.target.style.cursor = 'pointer';
        //                },
        //                onLeave: (event, chartElement) => {
        //                    event.native.target.style.cursor = 'default';
        //                }
        //            }
        //        }
        //    },
        //    plugins: [ChartDataLabels]
        //};
        //const pieChart = new Chart(document.getElementById("pieChart"),
        //    config);

    </script>
}